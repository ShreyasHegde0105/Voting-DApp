{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-8eb82b2969f342a72411ef9ce748615e094422b7",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/Voting.sol": "project/contracts/Voting.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/Voting.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.20;\r\n\r\ncontract Voting {\r\n\r\n    // ---- STRUCTURES ----\r\n    struct Candidate {\r\n        uint256 id;\r\n        string name;\r\n        uint256 voteCount;\r\n    }\r\n\r\n    struct Voter {\r\n        bool isRegistered;\r\n        bool hasVoted;\r\n    }\r\n\r\n    // ---- STATE VARIABLES ----\r\n    address public admin;\r\n    uint256 public candidateCount;\r\n\r\n    mapping(uint256 => Candidate) public candidates;\r\n    mapping(address => Voter) public voters;\r\n\r\n    // ---- EVENTS ----\r\n    event Voted(address indexed voter, uint256 candidateId);\r\n    event CandidateAdded(uint256 id, string name);\r\n\r\n    // ---- CONSTRUCTOR ----\r\n    constructor() {\r\n        admin = msg.sender; // the person who deploys is admin\r\n    }\r\n\r\n    // ---- MODIFIER ----\r\n    modifier onlyAdmin() {\r\n        require(msg.sender == admin, \"Only admin can perform this action\");\r\n        _;\r\n    }\r\n\r\n    // ---- FUNCTIONS ----\r\n\r\n    // Add a candidate (only admin)\r\n    function addCandidate(string memory _name) public onlyAdmin {\r\n        candidateCount++;\r\n        candidates[candidateCount] = Candidate(candidateCount, _name, 0);\r\n        emit CandidateAdded(candidateCount, _name);\r\n    }\r\n\r\n    // Register a voter (only admin for now)\r\n    function registerVoter(address _voter) public onlyAdmin {\r\n        voters[_voter] = Voter(true, false);\r\n    }\r\n\r\n    // Vote function\r\n    function vote(uint256 _candidateId) public {\r\n        require(voters[msg.sender].isRegistered, \"You are not registered\");\r\n        require(!voters[msg.sender].hasVoted, \"You have already voted\");\r\n        require(_candidateId > 0 && _candidateId <= candidateCount, \"Invalid candidate\");\r\n\r\n        voters[msg.sender].hasVoted = true;\r\n        candidates[_candidateId].voteCount++;\r\n\r\n        emit Voted(msg.sender, _candidateId);\r\n    }\r\n\r\n    // Get candidate votes\r\n    function getVotes(uint256 _candidateId) public view returns (uint256) {\r\n        require(_candidateId > 0 && _candidateId <= candidateCount, \"Invalid candidate\");\r\n        return candidates[_candidateId].voteCount;\r\n    }\r\n}\r\n"
      }
    }
  }
}